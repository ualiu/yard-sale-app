<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>find yard sales in KW - jard.</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
<body>
  <!-- <li class="nav-item"><a class="nav-link active" href="/api/post/garagePosts">View all Garage Sales</a></li> -->

  
  <div class="container mt-5">
    <div class="container mt-1">
      <h1 class="mb-4">Currently, there are <span style="color:green">(<b><%= numOfPosts %></b>)</span> upcoming yard sales posted in Kitchener-Waterloo:</h1>
    </div>
    </div>
    
    <div class="container mt-5">
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">What's happening:</th>
          <th scope="col">Who's organizing:</th>
          <th scope="col">Where's the address:</th>
          <th scope="col">When:</th>
          <th scope="col">Time:</th>
        </tr>
      </thead>
      <tbody>
        <% garageSales.forEach(garageSale => { 
          let date = new Date(garageSale.date); 
          let formattedDate = date.getDate() + '/' + (date.getMonth()+1) + '/' + date.getFullYear(); %>
            <tr>
                <td><%= garageSale.description %></td>
                <td><%= garageSale.userID.userName %></td>
                <td><%= garageSale.location %></td>
                <td><%= formattedDate %></td>
                <td><%= garageSale.time %></td>
                <td>
                  <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                    <a href="#" type="button" class="btn btn-outline-success btn-md" onclick="alertMessage()"><i class="fas fa-eye"></i>
                      See pictures
                    </a>
                </div>
                
                <script>
                    function alertMessage() {
                        alert("Sorry this feature doesn't work yet. It will be available soon!");
                    }
                </script>
                </td>
            </tr>
        <% }) %>
      </tbody>
    </table>

    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
      <a href="/" type="button" class="btn btn-outline-danger btn-lg"><i class="fas fa-arrow-left"></i>
        Return to main page
      </a>
    </div>

    <div class="container mt-4">
      <nav aria-label="Page navigation">
        <ul class="pagination">
          <% for (let i = 1; i <= totalPages; i++) { %>
            <li class="page-item <%= currentPage == i ? 'active' : '' %>">
              <a class="page-link" href="?page=<%= i %>"><%= i %></a>
            </li>
          <% } %>
        </ul>
      </nav>
    </div>
    
  </div>
  

  <!-- Bootstrap JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/js/bootstrap.bundle.min.js" integrity="sha512-9fDnDEZlqUSn8GOUWfPsxmAujwYQHTFv7FlRkW9Xz/aNlO6UBAvNl2N25jSWfzgUxdDwUHrlrjK/6nnXm6myng==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>
</html>
